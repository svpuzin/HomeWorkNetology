# Домашнее задание к занятию «Уязвимости и атаки на информационные системы»

------

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя **nmap**.

![s1](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2012.54.55.png)

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

![s2](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2015.41.30.png)

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

- Какие сетевые службы в ней разрешены?

![s4](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2015.55.07.png)
  
- Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)

  ![s3](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2015.42.09.png)

*Приведите ответ в свободной форме.*  

### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

- Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
- Как отвечает сервер?

SYN

![s5](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2021.13.43.png)

SYN это используемый по умолчанию и наиболее популярный тип сканирования. Он способен сканировать тысячи портов в секунду при быстром соединении, его работе не препятствуют ограничивающие бранмауэры. Этот тип сканирования относительно незаметен, т.к. при таком сканировании TCP соединение никогда не устанавливается до конца. Он также предоставляет ясную и достоверную дифференциацию между состояниями открыт, закрыт и фильтруется. Эту технику часто называют сканированием с использованием полуотрытых соединений, т.к. вы не открываете полного TCP соединения. Вы посылаете SYN пакет, как если бы вы хотели установить реальное соединение и ждете. Ответы SYN/ACK указывают на то, что порт прослушивается (открыт), а RST (сброс) на то, что не прослушивается. Если после нескольких запросов не приходит никакого ответа, то порт помечается как фильтруемый. Порт также помечается как фильтруемый, если в ответ приходит ICMP сообщение об ошибке недостижимости.

FIN

![s6](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2021.15.32.png)

Сканирование FIN устанавливает только флаг FIN. Если в ответ получен пакет RST, то порт считается закрытым, а отсутствие ответа означает, что порт открыт/отфильтрован. Поскольку ранее соединение с исследуемым узлом не было установлено, исследуемый узел отвечает RST-пакетом для сброса соединения.

Xmas

![s7](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2021.17.23.png)

При Xmas устанавливаются FIN, PSH и URG флаги. Если в ответ приходит RST пакет, то порт считается закрытым, отсутствие ответа означает, что порт открыт фильтруется. Порт помечается как фильтруется, если в ответ приходит ICMP ошибка о недостижимости.


UDP

![s8](https://github.com/svpuzin/HomeWorkNetology/blob/main/Информационная%20безопасность/Уязвимости%20и%20атаки%20на%20информационные%20системы/img/Снимок%20экрана%202024-05-11%20в%2021.25.23.png)

UDP сканирование работает путем посылки пустого UDP заголовка на каждый целевой порт. Если в ответ приходит ICMP ошибка о недостижимости порта (тип 3, код 3), значит порт закрыт. Другие ICMP ошибки недостижимости (тип 3, коды 1, 2, 9, 10 или 13) указывают на то, что порт фильтруется. Иногда, служба будет отвечать UDP пакетом, указывая на то, что порт открыт. Если после нескольких попыток не было получено никакого ответа, то порт классифицируется как открыт|фильтруется. Большой проблемой при UDP сканировании является его медленная скорость работы. Открытые и фильтруемые порты редко посылают какие-либо ответы, заставляя отправлять повторные запросы, на случай если пакеты были утеряны. Закрытые порты часто оказываются еще большей проблемой. Обычно они в ответ возвращают ICMP ошибку о недостижимости порта. Но в отличии от RST пакетов отсылаемых закрытыми TCP портами в ответ на SYN или сканирование с установкой соединения, многие хосты ограничивают лимит ICMP сообщений о недостижимости порта по умолчанию. Nmap обнаруживает такого рода ограничения и соответственно сокращает количество запросов, чтобы не забивать сеть бесполезными пакетами, которые все равно будут отброшены целевой машиной. К сожалению, при ограничении в Linux (один пакет в секунду) сканирование 65,536 портов займет более 18 часов. К способам увеличения скорости UDP сканирования относятся: параллельное сканирование нескольких хостов, сканирование в первую очередь только наиболее популярных портов, сканирование из-за брандмауэра и использование --host-timeout для пропуска медленных хостов.
